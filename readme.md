# Long-Novel-GPT

## 关于项目
Long-Novel-GPT是一个基于GPT等大语言模型的长篇小说生成器。它采用层次化的大纲/章节/正文结构，以把握长篇小说的连贯剧情，通过上下文管理优化API调用成本，并根据自身或用户反馈不断进行优化，直至达到预定目标。

## 目标
本项目的目标是根据用户提供的初步想法（例如：我想写一部xxx样的小说），通过AI不断完善和构建小说内容，最终生成达到人类作家水平的长篇小说。

## 关键特性
- **结构化写作**：通过层次化的大纲/章节/正文来进行结构化写作，有效把握长篇小说的发展脉络。
- **反思循环**：在不断的反思中优化生成的大纲、章节和正文内容。
- **成本优化**：通过上下文管理优化API调用成本，确保每次API调用的费用固定，不会因反思次数增加而上升。

![关键特性](assets/lngpt_pipeline.png "Long Novel GPT Pipeline")

## 快速上手

### 安装
```bash
conda create -n lngpt python=3.10
conda activate lngpt
pip install -r requirements.txt
```

### 界面
我们提供了一个Gradio Demo用于展示Long-Novel-GPT的功能。可以通过以下命令启动：
```bash
cd Long-Novel-GPT
python demo/app.py
```

Gradio DEMO中有5个Tab页面，分别为：
- **生成小说名**：这是初始页面，用于新建或加载小说项目。你生成的所有内容会被保存在`Long-Novel-GPT/output/{小说名}`下。
- **生成大纲**：在选择小说后，可以在这里生成小说的大纲。
- **生成章节**：在此处生成小说的各个章节。
- **生成正文**：在此编写小说的具体内容。
- **设置**：在这里设置OpenAI API以及一些生成小说的参数。

![Gradio DEMO有5个Tab页面](assets/demo_preview.jpg "Demo Preivew")

### 使用指南
1. GPT-3.5可能不足以生成达到签约或出版水平的小说，请优先选择GPT-4 API。
2. 请在**设置**页面中配置OpenAI API，否则无法使用。
3. 前四个页面的顺序是固定的，必须按照顺序依次生成小说名/大纲/章节/正文，且每一个页面依赖上一个页面的结果。
4. 如果遇到任何无法解决的问题，请尝试刷新页面或重启程序。

## 后续更新计划
- 添加百度文心一言4.0 API支持（正在进行中）。
- 支持Docker部署（正在进行中）。
- 支持单独生成大纲/章节/正文的功能（未开始）。

## 贡献
我们欢迎所有形式的贡献，无论是新功能的建议、代码改进，还是bug报告。请通过GitHub issues或pull requests与我们联系。